function btnSearch_Click(n,t){return t&&t=="txtSearchMobile"&&$("#txtSearch").val($("#txtSearchMobile").val()),validate()?Search():void 0}function Search_KeyPress(n,t){var i=n.keyCode||n.charCode;if(i==13&&(t&&t=="txtSearchMobile"&&$("#txtSearch").val($("#txtSearchMobile").val()),validate()))return Search()}function Search(n){var e,s;try{getSelectedItems();var o=window.location.href,r="",u="",i="",f="",t="";if(u=$("#ddlSearchType").val(),i=$("#txtSearch").val(),(i==" Enter your query here... "||i=="")&&(i=$("#txtSearchMobile").val()),u=="quicksearch-seriestitle"&&stringEndsWith(i.toLowerCase(),"series")&&(i=i.toLowerCase().replace("series","ser.")),application.appName=="RCL"&&(u=="quicksearch-all"&&(u="rcl-searchall"),document.getElementById("selectedValMain").textContent!="All Subjects"||document.getElementById("selectedValMainXS").textContent!="All Subjects"?(t=$("#selectedValMain").attr("value"),t&&t!=""||(t=$("#selectedValMainXS").attr("value")),(document.getElementById("selectedValChild").textContent!="All Subjects"||document.getElementById("selectedValChildXS").textContent!="All Subjects")&&(t+=$("#selectedValChild").attr("value")&&$("#selectedValChild").attr("value")!=""?"|"+$("#selectedValChild").attr("value"):"|"+$("#selectedValChildXS").attr("value")),SetSessionItem("RclSubjects",t),t!=""&&(t="&sub="+t)):SetSessionItem("RclSubjects","")),i.indexOf("Enter your query here")==-1&&i!=""&&(f=u+encodeURIComponent(":["+i+"]")),n)if(n.indexOf("q=")!=-1)r="/Search/Results?"+n,u=="rcl-searchall"&&ResetDropDownCache();else if(n.indexOf("shsel")!=-1)if(e=GetShowSelectedItems(),e)r="/Search/Results?"+e;else return!1;else r="/Search/Results?q="+f+"&qs=1&"+n+t;else r="/Search/Results?q="+f+"&op=1&qs=1"+t;o.toUpperCase().indexOf("DEBUG")!=-1&&(r=r+"&debug=true");s=GetQueryStringFromTargetURL("op",r);document.location.href=r}catch(h){}return!1}function RemoveFacet(n){var t=GetQueryString("f"),i=GetQueryString("op");if(t&&t!=""&&t!="undefined"||(t=sessionStorage.getItem("BIP_SELECTED_FACETS")),t=decodeURI(t),t){if(t=t.replace(n,""),t.indexOf(" @@  @@ ")!=-1&&(t=t.replace(" @@  @@ "," @@ ")),t.slice(0,4)==" @@ "&&(t=t.slice(4,t.length)),t.slice(-4)==" @@ "&&(t=t.slice(0,t.length-4)),t==""||t=="undefined")return Search("f=&op=5"),!0;t="f="+t+"&op=5";Search(t)}return!0}function FacetSearch(n){fParams=$.trim(n);fParams=fParams.substring(2,fParams.length);var i=GetQueryString("op"),t=GetQueryString("f");if(t&&t!="undefined"||window.location.href.indexOf("FullRefinement")==-1&&i!=12&&i!=11&&i!=2&&i!=3&&i!=4||(t=sessionStorage.getItem("BIP_SELECTED_FACETS")),t)if(t.indexOf(fParams)==-1)n+=" @@ "+t,n=n+"&op=5",Search(n);else return!1;else n=n+"&op=5",Search(n)}function OnPageSizeChange(){var t=$("#ddlRecsPerPage").val(),i=$("input[id$='hdnShowSelected']").val(),n;n=i=="Y"?"&op=4&ps="+t+"&shs=Y":"&op=4&ps="+t;Search(n)}function OnPageSizeChange2(){var t=$("#ddlRecsPerPage2").val(),i=$("input[id$='hdnShowSelected']").val(),n;n=i=="Y"?"&op=4&ps="+t+"&shs=Y":"&op=4&ps="+t;Search(n)}function OnPageClick(n){var i=n,r=$("input[id$='hdnShowSelected']").val(),t;return t=r=="Y"?"&op=3&pn="+i+"&shs=Y":"&op=3&pn="+i,Search(t)}function OnSortChange(){var i=$("#ddlSort").val(),t="&op=2&sf="+i,n=GetQueryString("f");n&&n!=""&&(t+="&f="+n);Search(t)}function ReturnToSrchResults(){return Search("&op=12&shs=Y")}function RssFeedsClick(){BowkerAjaxCall("/Search/GetSearchString","HandleRssClick")}function HandleRssClick(n){var i,t,r;try{i=n}catch(u){return!1}t="/Search/RssFeeds?"+i;i.substring(0,5)=="isbn="&&(t=t.replace(/\-/g,""));t+=application.appName=="RCL"?"&app=rcl":"&app=bip";r=window.open(t,"open_window","menubar, toolbar, location, directories, status, scrollbars, resizable, dependent, width=800, height=400, left=0, top=0")}function GetQueryString(n){for(qsvals=window.location.search.substring(1),qs=qsvals.split("&"),i=0;i<qs.length;i++)if(val=qs[i].split("="),val[0]==n)return val[1]}function setValInSession(n){if(typeof sessionStorage!="undefined")try{sessionStorage.setItem("BIP_Selected_Items",JSON.stringify(n))}catch(t){}else return SetValinServerSession(JSON.stringify(n)),!1}function getValFromSession(){if(typeof sessionStorage!="undefined")try{return sessionStorage.getItem("BIP_Selected_Items")?$.parseJSON(sessionStorage.getItem("BIP_Selected_Items")):[]}catch(t){}else{var n=GetValFromServerSession();return n?$.parseJSON(n):[]}}function SetValinServerSession(n){var t=JSON.stringify({selectedItems:n});BowkerAjaxCall("/Search/SetValinServerSession","{}",t)}function GetValFromServerSession(){return BowkerAjaxCallNoParams("/Search/GetValFromServerSession")}function clearSession_SelectedItems(){if(typeof sessionStorage!="undefined")try{sessionStorage.getItem("BIP_Selected_Items")&&sessionStorage.removeItem("BIP_Selected_Items")}catch(n){alert(n)}else BowkerAjaxCall("/Search/ClearSession_BIP_SEARCH_SELITEMS","{}")}function getCurrPageCheckedCount(){var n=0,i=0,t;return n=$(".mlCheckBox:checked").length,t=getValFromSession(),t!=null&&t!=""&&($(".mlCheckBox:checked").each(function(){var n=$(this).attr("id"),r=$(this).attr("bip:isbn");$.each(t,function(t,u){u.isbn==r&&u.id==n&&(i=i+1)})}),n>0&&(n=n-i)),n}function getTotalCheckedCount(){var i=$("#DetailedAction span[prop='view']").text();if(i=="Detail")return 1;var t=getCurrPageCheckedCount(),n=getValFromSession();return n!=null&&n!=""?t+n.length:t}function RemoveItemFromSession(n){var t=getValFromSession();t!=null&&t!=""&&(t.length==1?clearSession_SelectedItems():$.each(t,function(i,r){if(r.id==n[0].id&&r.isbn==n[0].isbn)return t.splice(i,1),setValInSession(t),!1}))}function getSelectedItems(){var t="",n,i;if(t=$(window).width(),t<=767)getSelectedItemsForXs();else if(typeof sessionStorage!="undefined"&&(sessionStorage.ListBrowseOptionSelected="null"),n=getValFromSession(),n){if(i=window.location.pathname,i.indexOf("DetailedView")!=-1){getSearchActionItems();return}$(".mlCheckBox:checked").each(function(){var t={},r=$(this).attr("bip:item-uid"),o=$(this).attr("bip:title-uid"),f=$(this).attr("bip:isbn"),u=$(this).attr("bip:market-code"),s=$(this).attr("bip:market-uid"),e=$(this).attr("id"),h=$(this).attr("bip:title"),i="div#mainContent_"+r+u+"  div.divQN",a="div#hiddenContent_"+r+"_"+u+"  div.divQN",c=$(i).find("input[prop='q']").val()?$(i).find("input[prop='q']").val():$("#txtQuantityBIP").val(),l=$(i).find("input[prop='n']").val()?$(i).find("input[prop='n']").val():$("#txtNoteBIP").val();t.itemUid=r;t.titleUid=o;t.title=h;t.quantity=c;t.note=l;t.isbn=f;t.marketCode=u;t.marketUid=s;t.id=e;n!=null&&n!=""&&$.each(n,function(t,i){if(i.isbn==f&&i.id==e)return n.splice(t,1),!1});n.push(t)});setValInSession(n)}}function getSelectedItemsForXs(){var n,t;if(typeof sessionStorage!="undefined"&&(sessionStorage.ListBrowseOptionSelected="null"),n=getValFromSession(),n){if(t=window.location.pathname,t.indexOf("DetailedView")!=-1){getSearchActionItems();return}$(".mlCheckBox:checked").each(function(){var t={},r=$(this).attr("bip:item-uid"),o=$(this).attr("bip:title-uid"),f=$(this).attr("bip:isbn"),u=$(this).attr("bip:market-code"),s=$(this).attr("bip:market-uid"),e=$(this).attr("id"),h=$(this).attr("bip:title"),a="div#mainContent_"+r+u+"  div.divQN",i="div#hiddenContent_"+r+"_"+u+"  div.divQN",c=$(i).find("input[prop='q']").val()?$(i).find("input[prop='q']").val():$("#txtQuantityBIP").val(),l=$(i).find("input[prop='n']").val()?$(i).find("input[prop='n']").val():$("#txtNoteBIP").val();t.itemUid=r;t.titleUid=o;t.title=h;t.quantity=c;t.note=l;t.isbn=f;t.marketCode=u;t.marketUid=s;t.id=e;n!=null&&n!=""&&$.each(n,function(t,i){if(i.isbn==f&&i.id==e)return n.splice(t,1),!1});n.push(t)});setValInSession(n)}}function getSearchActionItems(){var a=window.location.pathname,u="",i="",r="",f,e;if(a.indexOf("DetailedView")!=-1){if(f=$("[id$=hdnRequestIds]").val(),e=[],f!=null){var s=f.split(":"),v=s[0],h=s[1];i=$("[id$=txtQuantity]").val()?$("[id$=txtQuantity]").val():$("#txtQuantityBIP").val();r=$("[id$=txtNote]").val()?$("[id$=txtNote]").val():$("#txtNoteBIP").val();var y=$(".mlCheckBox").attr("bip:market-uid"),o=$(".mlCheckBox").attr("bip:isbn"),p=$(".mlCheckBox").attr("bip:title"),n={};n.titleUid=v;n.title=p;n.itemUid=h;n.quantity=i;n.note=r;n.marketUid=y;n.isbn=o;n.marketCode=$("[id$=hdnMarketCode]").val();n.id=h+$("[id$=hdnMarketCode]").val();e.push(n);u=e;var c=$(".mlCheckBox").is(":checked"),t=getValFromSession(),l=!1;t!=null&&t!=""&&$.each(t,function(u,f){if(f.id==n.id&&f.isbn==o)return l=!0,t[u].quantity=i,t[u].note=r,!1});c||i!=""||r!=""?l||t.push(n):c||i!=""||r!=""||$.each(t,function(i,r){if(r.isbn==o&&r.id==n.id)return t.splice(i,1),!1});t&&setValInSession(t)}}else getSelectedItems(),u=getValFromSession();return JSON.stringify(u)}function GetShowSelectedItems(){var i=getTotalCheckedCount(),n,t;return i>300?(alert("A maximum of only 300 items can be selected."),!1):(n=getValFromSession(),t=GetSelectedMarketCodeAndItemUids(n),"shsel="+t+"&op=11")}function GetSelectedMarketCodeAndItemUids(n){var t="",i=$("#DetailedAction span[prop='view']").text();return i=="Detail"?document.getElementById("hdnItemUid")&&document.getElementById("hdnItemUid").value!=""&&(t=document.getElementById("hdnMarketCode").value+","+document.getElementById("hdnItemUid").value):n!=null&&$.each(n,function(n,i){i.itemUid!=""&&(t=t+i.marketCode+","+i.itemUid+"|")}),t.charAt(t.length-1)=="|"?t.substring(0,t.length-1):t}function clear_Hide_QuantityNoteTextboxes(){var n=$("div.divQN");n.find("input[prop='q']").val("");n.find("input[prop='n']").val("");n.css("display","none")}function TrimFormatFieldinSearchResults(){var t=window.location.pathname,n;t.indexOf("Search/Results")!=-1&&(n=$("#format").text(),n&&($("#format").attr("title",n),n.length>85&&$("#format").html(n.substring(0,85)+"...")))}function SetActionBarWidth(){$(".srch-rslts-title-lnk").each(function(){var n=$(this).text();n.length>=8&&($(this).attr("title",n),$(this).text(n.substring(0,6)+"..."))})}function DisplayTagCloud(){var n;try{n=$("input[id$='hdnJsonTagWords']").val();$("#tagCloud").html(n);return}catch(t){alert("Error in callback: "+t+"");return}}function getPath(n){return n}function isAdmin(){var n="",n=sessionStorage.getItem("ADMINData"),i,t;if(n)return n=n.split("<SPLIT>"),n[2]=="Granted"||n[2]=="GrantedForAdminPage"?!0:!1;if(i=BowkerAjaxCallReturn("/MyAccount/GetAdminData",""),i!=null&&(n=i),t=n.split("<SPLIT>"),t[2]=="Granted")return!0;if(t[2]=="Undetermined"||t[2]=="Invalid User Name"){if(n=sessionStorage.getItem("ADMINData").split("<SPLIT>"),n[2]=="Granted"||n[2]=="GrantedForAdminPage")return!0}else return!1}function CheckPW(n,t){var u,i,f,e,o,s,r;return t!="PP"?!0:(u=isAdmin(),u)?!0:(i=!1,f=BowkerAjaxCallReturn("/Search/CheckListUidInSession","{'listUid':'"+n+"'}"),f==!1?(e=getPath("GetPassword.htm?ListID="+n),o=window.showModalDialog(e,"List Password","dialogWidth:350px;dialogHeight:130px;scroll:no;resizable:no;status:no;center:yes;"),o?(i=!0,r=BowkerAjaxCallReturn("/Search/SaveListUidInSession","{'listUid':'"+n+"'}")):(s=BowkerAjaxCallNoParams("/List/GetIsValidListPasswordFromSession"),s=="true"?(i=!0,r=BowkerAjaxCallReturn("/Search/SaveListUidInSession","{'listUid':'"+n+"'}")):i=!1)):i=!0,i)}function OnListTypeChange(){var n=$("input[name='AddtoList']:checked").val();n==1?OnAddtoExList():n==2&&OnCreateNewList()}function OnCreateNewList(){var t=getTotalCheckedCount(),n;return n=t>0?"Add "+t+" item(s) to New List":"Add item to a New List",$("#ModalLabel").text(n),$("#divCreateList").show(),$("#divExList").hide(),$(".tblCreateList").show(),document.getElementById("addNewProcessingMessage").style.display="none",$(".divBackToResultCreateList").hide(),$(".divError").hide(),$("[id$=ListNameTextBox]").val(""),$("[id$=EmailTextBox]").val(""),$("[id$=CommentTextBox]").val(""),$("[id$=PasswordTextBox]").val(""),$("[id$=ConfirmPasswordTextBox]").val(""),$("#PwdProtectCheckBox").attr("checked",!1),$(".pwdField").hide(),!1}function OnAddtoExList(){$("#divCreateList").hide();$("#trCheckListPwd").hide();document.getElementById("addProcessingMessage").style.display="none";document.getElementById("addProcessingMessage").innerHTML="Processing, please wait...";$.ajax({type:"POST",url:"/ListDetails/RefreshListDropDown",data:{},contentType:"application/json; charset=utf-8",dataType:"json",success:function(n){var i=n,u=document.getElementById("ListDropDownList"),e,t,r,f;for(u.length=0,e=[],t=0;t<i.Table.length-1;t++)r=document.createElement("option"),r.text=i.Table[t][1],r.value=i.Table[t][0],$(r).attr("text",i.Table[t][1]),f={},f.ListID=i.Table[t][0],f.ListType=i.Table[t][2],e.push(f),u.options[u.options.length]=r;sessionStorage.setItem("DropDownListItems",JSON.stringify(e));GetListLastSelectedValue(u);$("#divExList").show();$("#tblExListForm").show()}})}function GetListLastSelectedValue(n){if(typeof sessionStorage!="undefined")try{var t=sessionStorage.getItem("BIP_List_Selected"),i=sessionStorage.getItem("BIP_List_Selected_ID");t!=null&&$(n+'option[text="'+t+'"]').attr("selected",!0);CheckIsPwdProtected("AddtoList")}catch(r){}}function SaveListLastSelectedValue(n){if(typeof sessionStorage!="undefined")try{sessionStorage.setItem("BIP_List_Selected",n)}catch(t){}}function SaveListLastSelectedID(n){if(typeof sessionStorage!="undefined")try{sessionStorage.setItem("BIP_List_Selected_ID",n)}catch(t){}}function GetItemUidData(n){return CallServer(n,""),!1}function parseXml(n){if(jQuery.browser.msie){var t=new ActiveXObject("Microsoft.XMLDOM");t.loadXML(n);n=t}return n}function btnCreateList(){var n="",i="",r="",t="",u="",c=window.location.pathname,s=$("[id$=PwdProtectCheckBox]").is(":checked"),f,e;if(n=$("[id$=ListNameTextBox]").val(),f=$("[id$=CommentTextBox]").val(),String.prototype.isText=function(){return/^[\w\s]*$/.test(this)},n==""||n.trim()=="")return DisplayErrorMsg("List Name should not be blank"),$("[id$=ListNameTextBox]").focus(),!1;if(!n.isText())return DisplayErrorMsg("List names must only contain the following characters: numbers, letters, spaces and the underscore"),$("[id$=ListNameTextBox]").focus(),!1;if($("[id$=PwdProtectCheckBox]").is(":checked")){if(i="PP",r=$("[id$=EmailTextBox]").val(),t=$("[id$=PasswordTextBox]").val(),u=$("[id$=ConfirmPasswordTextBox]").val(),t.length<1)return DisplayErrorMsg("Password is required."),$("[id$=PasswordTextBox]").focus(),!1;if(t!=u)return DisplayErrorMsg("Confirm Password unmatched."),$("[id$=ConfirmPasswordTextBox]").focus(),!1;if(e=/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/,e.test(r)==!1)return DisplayErrorMsg("Invalid Email Address."),$("[id$=EmailTextBox]").focus(),!1}else i="P";document.getElementById("addNewProcessingMessage").style.display="";$(".ListDropDownList").attr("disabled",!0);document.getElementById("PwdProtectCheckBox").disabled=!0;$("[id$=ListNameTextBox]").attr("disabled","disabled");$("[id$=PasswordTextBox]").attr("disabled","disabled");$("[id$=ConfirmPasswordTextBox]").attr("disabled","disabled");$("[id$=EmailTextBox]").attr("disabled","disabled");$("[id$=CommentTextBox]").attr("disabled","disabled");$("[id$=btnCreateList]").attr("disabled","disabled");$("[id$=btnCreateCancel]").attr("disabled","disabled");$("[id$=btnCreateList]").removeClass("add");$("[id$=btnCreateCancel]").removeClass("cancel");$("[id$=btnCreateList]").addClass("addDisable");$("[id$=btnCreateCancel]").addClass("cancelDisable");var o=getSearchActionItems(),h=JSON.stringify({listName:n,marketId:"",comment:f,pwdProtected:s,listType:i,email:r,password:t,title_Item_UID:o});return BowkerAjaxCallList("/Search/AddItemToNewBIPList",h,function(){var t=this;if($(".ListDropDownList").attr("disabled",!0),t=="1")$(".tblCreateList").hide(),$(".divBackToResultCreateList").show(),document.getElementById("addNewProcessingMessage").style.display="none",$(".ListDropDownList").attr("disabled",!1),document.getElementById("PwdProtectCheckBox").disabled=!1,$("[id$=ListNameTextBox]").removeAttr("disabled"),$("[id$=PasswordTextBox]").removeAttr("disabled"),$("[id$=ConfirmPasswordTextBox]").removeAttr("disabled"),$("[id$=EmailTextBox]").removeAttr("disabled"),$("[id$=CommentTextBox]").removeAttr("disabled"),$("[id$=btnCreateList]").removeAttr("disabled"),$("[id$=btnCreateCancel]").removeAttr("disabled"),$("[id$=btnCreateList]").removeClass("addDisable"),$("[id$=btnCreateCancel]").removeClass("cancelDisable"),$("[id$=btnCreateList]").addClass("add"),$("[id$=btnCreateCancel]").addClass("cancel"),$(".divUserMsgCreateList").text("List Creation Successful"),SaveListLastSelectedValue(n),ClearControlValues(JSON.parse(o));else return document.getElementById("addNewProcessingMessage").style.display="none",$(".ListDropDownList").attr("disabled",!1),document.getElementById("PwdProtectCheckBox").disabled=!1,$("[id$=ListNameTextBox]").removeAttr("disabled"),$("[id$=PasswordTextBox]").removeAttr("disabled"),$("[id$=ConfirmPasswordTextBox]").removeAttr("disabled"),$("[id$=EmailTextBox]").removeAttr("disabled"),$("[id$=CommentTextBox]").removeAttr("disabled"),$("[id$=btnCreateList]").removeAttr("disabled"),$("[id$=btnCreateCancel]").removeAttr("disabled"),$("[id$=btnCreateList]").removeClass("addDisable"),$("[id$=btnCreateCancel]").removeClass("cancelDisable"),$("[id$=btnCreateList]").addClass("add"),$("[id$=btnCreateCancel]").addClass("cancel"),DisplayErrorMsg(t),!1}),!1}function ClearControlValues(){$('.tblCreateList input[type="text"]').val("");$("[id$=CommentTextBox]").val("");$("[id$=PasswordTextBox]").val("");$("[id$=ConfirmPasswordTextBox]").val("");$("[id$=PwdProtectCheckBox]").removeAttr("checked")}function DisplayErrorMsg(n){if(n.indexOf("<missingmarket>")!=-1){var i=n.split("<separator>"),t=i[1].split("<missingmarket>");t[0]!=""&&$(".divErrMsg").text(""+t[0]+"");t[1].length>0&&($(".Display").show(),Markets.missing=t[1]);$(".divError").show();$(".tblCreateList").hide()}else n=="2"?alert("Item selection cannot exceed maximum limit of 500!"):($(".divErrMsg").html(""+n+""),$(".divError").show())}function displaySelectedCount(){var t=$(".mlCheckBox:checked").length,f=$(".mlCheckBox:not(:checked)").length,i=t+f,n,r,u;i!=0&&(i==t?$("#chckHead").attr("checked",!0):$("#chckHead").attr("checked",!1));n=getTotalCheckedCount();r="Selected Items("+n+")";window.location.pathname.indexOf("DetailedView")==-1&&($("#divSelectedCount").text(r),document.getElementById("divSelectedCountSm")&&(u="<span class='caret'><\/span>",document.getElementById("divSelectedCountSm").innerHTML=n+" Selected Items"+u))}function displayDefaultEmailDialogUI(){$(".emailRecordFormat :nth-child(1)").attr("selected","selected");$(".emailWithCoverImage").attr("checked",!1);$(".emailWithAnnotations").attr("checked",!1);$(".emailWithReviews").attr("checked",!1);$(".emailWithAuthorBios").attr("checked",!1);$(".emailWithStockAvailability").attr("checked",!1);$(".emailWithPublisherInformation").attr("checked",!1);$(".emailTo").val("");$(".emailMsg").val("");LoadLastEmailUsedFromSession()}function LoadLastEmailUsedFromSession(){if(typeof localStorage!="undefined"){var n=localStorage.getItem("LastFromEmailUsed"),t=localStorage.getItem("LastToEmailUsed");n!=null&&($("#emailFrom").val(n),$("#from").val(n),$("#fromEmail").val(n));t!=null&&$("#emailTo").val(t)}}function displayDefaultRequestTitleDialogUI(){$("#from").val("");$("#message").val("");$("#rttYourName").val("");$("#rttLibraryCardNumber").val("");$("#rttPhoneNumber").val("");$("#rttStreetAddress").val("");$("#rttCity").val("");$("#rttState").val("");$("#rttZipCode").val("");$("input:radio[name=rttContactMethod]").attr("checked",!1);$("#rttDate").val("");LoadLastEmailUsedFromSession()}function displayDefaultPrintDialogUI(){$("#printRecordFormat :nth-child(1)").attr("selected","selected");$("#printWithCoverImage").attr("checked",!1);$("#printWithAnnotations").attr("checked",!1);$("#printWithReviews").attr("checked",!1);$("#printWithAuthorBios").attr("checked",!1);$("#printWithStockAvailability").attr("checked",!1);$("#printWithPublisherInformation").attr("checked",!1)}function displayDefaultDownloadDialogUI(){$("#downloadRecordFormat :nth-child(1)").attr("selected","selected");$("#downloadWithAnnotations").attr("checked",!1);$("#downloadWithReviews").attr("checked",!1);$("#downloadWithAuthorBios").attr("checked",!1);$("#downloadWithStockAvailability").attr("checked",!1);$("#downloadWithPublisherInformation").attr("checked",!1);$("#downloadWithAnnotations").attr("disabled",!1);$("#downloadWithReviews").attr("disabled",!1);$("#downloadWithAuthorBios").attr("disabled",!1);$("#downloadWithStockAvailability").attr("disabled",!1);$("#downloadWithPublisherInformation").attr("disabled",!1)}function ErrorMsg_NoRecSelected(){alert("Please check the title that you wish to continue the action")}function SrchCatalogItem(n){var i,t,r;if(n.length>0){if(i=n.split("|"),i.length>10)return alert("Maximum of 10 items is allowed for Searching Library Catalogs"),!1;t=GetPredictableUrl();$.trim(t)!=""?BowkerAjaxCall("/MyAccount/Get_PredictablePopupInfo","HandlePredictableURLPopUp","{'searchItems':'"+n+"','url':'"+t+"'}",!1,1):r=window.showModalDialog("/DetailedAction/SearchCatalog?Item="+n,window.self.parent,"dialogWidth:800px;dialogHeight:600px;left=0;top=0;center:yes;")}return!1}function GetPredictableUrl(){var n="",t=BowkerAjaxCallNoParams("/MyAccount/GetPredictableUrl");return t&&(n=t),n}function HandlePredictableURLPopUp(n){var f,i,t,r,u;try{f=n}catch(e){return!1}for(i=f.split("^^^^"),u="",t=1;t<i.length;t++)u="PredictableURL"+t,r=window.open(i[t],u.toString(),"width=800px,height=600px,resizable=yes,scrollbars=yes");r&&r.focus()}function SelectFacet(n){var t=$("#mlfullrefine_column_right");return t.html("&nbsp;"),t.addClass("mlfullrefine_column_loading"),window.location.href="/FullRefinement/Index?fct="+n,!1}function fbsClick(n,t,i){return i!="true"?window.open("https://www.facebook.com/sharer.php?s=100&p[title]="+n+"&p[url]=https://www-booksinprint-com.ezproxy.library.wisc.edu&p[images][0]="+t+"&p[summary]=","sharer","toolbar=0,status=0,width=626,height=550,scrollbars=yes"):window.open("https://www.facebook.com/sharer.php?s=100&p[title]="+n+"&p[url]=https://www.rclweb.net&p[images][0]="+t+"&p[summary]=","sharer","toolbar=0,status=0,width=626,height=550,scrollbars=yes"),!1}function twsClick(n,t){return t!="true"?window.open("https://twitter.com/intent/tweet?source=sharethiscom&amp;text="+n+"&url=https://www-booksinprint-com.ezproxy.library.wisc.edu","sharer","toolbar=0,status=0,width=626,height=336"):window.open("https://twitter.com/intent/tweet?source=sharethiscom&amp;text="+n+"&url=https://www.rclweb.net","sharer","toolbar=0,status=0,width=626,height=336"),!1}function gplusClick(n,t){return u=t!="true"?"https://www-booksinprint-com.ezproxy.library.wisc.edu":"https://www.rclweb.net",window.open("https://plus-google-com.ezproxy.library.wisc.edu/share?url="+encodeURIComponent(u),"gplusshare","toolbar=0,status=0,width=626,height=450"),!1}function CheckIsPwdProtected(n){var r=isAdmin(),t,i;if(r)return!0;$(".trListPwdError").hide();$(".divListPwdError").text("");$(".trCheckListPwd").hide();$(".trEmailMsg").hide();$("#txtListPassword").val("");$(".lnkForgotPwd").show();t=$.parseJSON(sessionStorage.getItem("DropDownListItems"));i="";i=n=="Copy"?$("[id$=ddExistingList]").val():n=="Move"?$("[id$=ddMoveList]").val():$("[id$=ListDropDownList]").val();t!=null&&t!=""&&$.each(t,function(n,t){var r,u;if(t.ListID==i)return r=t.ListType,r=="PP"?(u=CheckListUIDinSession(i),u?$(".trCheckListPwd").hide():$(".trCheckListPwd").show()):$(".trCheckListPwd").hide(),!1})}function CheckListPasswordForEdit(){var r=!1,n="",t="",u="",i="",n=$("#txtListPasswordEdit").val();return(i=$(" #txtListPasswordEdit"),t=$(".divListPwdError"),ListID=$("[id$=hdnListId]").val(),n&&n.length<1)?($(".trListPwdError").show(),u!=""&&u.attr("style","visibility:visible"),t!=""&&t.text("Please enter list password"),i!=""&&i.focus(),!1):(r=CheckListPassword("","","Edit"),r&&($(".tblForPrivateList").hide(),$(".tblEditForm").show(),$(".modal-footer").html("<button type='button' id='btnCancelEdit' class='btn btn-secondary' data-dismiss='modal'>Cancel<\/button><input type='button' value='Save' id='editListSubmit' onclick='List.editListSubmit()' class='btn btn-default HipSubmitList'/>")),!1)}function CheckListPassword(ListID,ListType,operation){var isPwNeeded,isValidPassword,msg,ProfileJSON,saved;if(((ListType==""||ListType=="undefined")&&(ListType=$("[id$=hdnListType]").val()),ListType!=""&&ListType!="PP")||(isPwNeeded=IsPwdNeeded(ListID),!isPwNeeded))return!0;$(".trListPwdError").hide();$(".divListPwdError").text("");$(".trEmailMsg").hide();var inputPwd="",errorDiv="",errorparentDiv="",txtboxpwd="";switch(operation){case"AddtoList":inputPwd=$("#txtListPassword").val();errorDiv=$(".divListPwdError");txtboxpwd=$("#txtListPassword");break;case"DeleteList":inputPwd=$("#txtListPasswordDel").val();ListID=$("#dialog_PrivateList").data("ListId");$("[id$=hdnListId]").val(ListID);errorDiv=$(".divListPwdError");txtboxpwd=$("#txtListPasswordDel");break;case"Print":errorDiv=$("#printValiationMessage");errorparentDiv=$("#printValiation");inputPwd=$("#txtListPassword").val();txtboxpwd=$("#txtListPassword");break;case"Download":errorDiv=$("#downloadValiationMessage");errorparentDiv=$("#downloadValiation");inputPwd=$("#txtListPasswordDownload").val();txtboxpwd=$("#txtListPasswordDownload");break;case"Email":errorDiv=$("#emailValiationMessage");errorparentDiv=$("#emailValiation");inputPwd=$("#txtListPasswordEmail").val();txtboxpwd=$(" #txtListPasswordEmail");break;case"Edit":inputPwd=$("#txtListPasswordEdit").val();txtboxpwd=$(" #txtListPasswordEdit");errorDiv=$(".divListPwdError");ListID=$("[id$=hdnListId]").val();break;case"Copy":inputPwd=$("#txtListPasswordCopy").val();txtboxpwd=$(" #txtListPasswordCopy");errorDiv=$(".divListPwdError");break;case"Move":inputPwd=$("#txtListPasswordMove").val();txtboxpwd=$(" #txtListPasswordMove");errorDiv=$(".divListPwdError");break;case"Redirect":inputPwd=$("#txtListPasswordDel").val();ListID=$("#dialog_PrivateList").data("ListId");$("[id$=hdnListId]").val(ListID);errorDiv=$(".divListPwdError");txtboxpwd=$("#txtListPasswordDel")}if(isValidPassword=!1,isValidPassword==!1){if(inputPwd.length<1)return $(".trListPwdError").show(),errorparentDiv!=""&&errorparentDiv.attr("style","visibility:visible"),errorDiv!=""&&errorDiv.text("Please enter list password"),txtboxpwd!=""&&(txtboxpwd.focus(),document.getElementById("addProcessingMessage")&&(document.getElementById("addProcessingMessage").style.display="none"),$(".ListDropDownList").attr("disabled",!1),$(".txtListPwdAddtoList").attr("disabled",!1),$("[id$=btnAddtoList]").attr("disabled",!1),$("[id$=btnCancel]").attr("disabled",!1),$("[id$=btnAddtoList]").addClass("add"),$("[id$=btnCancel]").addClass("cancel"),$("[id$=btnAddtoList]").removeClass("addDisable"),$("[id$=btnCancel]").removeClass("cancelDisable"),$(".trEmailMsg").hide()),!1;msg=BowkerAjaxCallReturn("/List/GetListPassword","{'listID':'"+ListID+"'}");try{ProfileJSON=eval("("+msg+")")}catch(e){return!1}if(ProfileJSON.ROWS[0].PASSWORD!=inputPwd)return $(".trListPwdError").show(),errorparentDiv!=""&&errorparentDiv.attr("style","visibility:visible"),errorDiv!=""&&errorDiv.text("Incorrect list password"),txtboxpwd!=""&&(txtboxpwd.focus(),document.getElementById("addProcessingMessage").style.display="none",$(".ListDropDownList").attr("disabled",!1),$(".txtListPwdAddtoList").attr("disabled",!1),$("[id$=btnAddtoList]").attr("disabled",!1),$("[id$=btnCancel]").attr("disabled",!1),$("[id$=btnAddtoList]").addClass("add"),$("[id$=btnCancel]").addClass("cancel"),$("[id$=btnAddtoList]").removeClass("addDisable"),$("[id$=btnCancel]").removeClass("cancelDisable"),$(".trEmailMsg").hide()),!1;if(isValidPassword=!0,isValidPassword){if(operation=="DeleteList"){$("#PrivateModalPopup").modal("hide");var listName=$("[id$=hdnListName]").val(),confirmMessage="Delete the list "+listName+", are you sure?",answer=confirm(confirmMessage);return answer==!0?(List.ListOperationEventHandler("DeleteList",ListID,ListType,listName),!0):(saved=BowkerAjaxCallReturn("/Search/SaveListUidInSession","{'listUid':'"+ListID+"'}"),!1)}operation=="Redirect"?(saved=BowkerAjaxCallReturn("/Search/SaveListUidInSession","{'listUid':'"+ListID+"'}"),RedirectToListDetail()):saved=BowkerAjaxCallReturn("/Search/SaveListUidInSession","{'listUid':'"+ListID+"'}")}}else isValidPassword=!0;return isValidPassword}function OpenPasswordDialog(n,t){$(".trListPwdError").hide();$(".divListPwdError").text("");$(".trEmailMsg").hide();$("#txtListPasswordDel").val("");$("#PrivateModalPopup").modal("show");var i=$("#dialog_PrivateList").data();i.ListId=n;i.operation=t}function CheckListPWOnLoad(n,t,i,r){var f=!0,u;r!=""&&$("[id$=hdnListName]").val(r);n!=""&&$("[id$=hdnListId]").val(n);t!=""&&$("[id$=hdnListType]").val(t);switch(i){case"Edit":$(".trListPwdError").hide();$(".divListPwdError").text("");$(".trEmailMsg").hide();break;case"Redirect":t=="PP"?(u=IsPwdNeeded(n),u?($(".btnRedirect").show(),$(".btnDeleteList").hide(),OpenPasswordDialog(n,i),f=!1):($.blockUI(),location.href="/ListDetails/Index?ListUID="+n+"&list_name="+r)):($.blockUI(),location.href="/ListDetails/Index?ListUID="+n+"&list_name="+r);break;case"Delete":if($("#hdnDeleteIndex").val("DeleteList"),t=="PP"){if(u=IsPwdNeeded(n),!u)return!0;$(".btnRedirect").hide();$(".btnDeleteList").show();ShowHidelistpasswordFields(t,"");OpenPasswordDialog(n,i);f=!1}}return f}function ForgotListPassword(n){var t="",i;return $(".divListPwdError").text(""),$("#printValiationMessage").text(""),$("#downloadValiationMessage").text(""),$("#emailValiationMessage").text(""),$("#txtListPassword").val(""),$("#txtListPasswordDel").val(""),$("#txtListPasswordDownload").val(""),$("#txtListPasswordEmail").val(""),$("#txtListPasswordEdit").val(""),$("#txtListPasswordCopy").val(""),$("#txtListPasswordMove").val(""),t=n=="AddtoList"?$("[id$=ListDropDownList]").val():n=="Copy"?$("[id$=ddExistingList]").val():n=="Move"?$("[id$=ddMoveList]").val():$("[id$=hdnListId]").val(),i=BowkerAjaxCallReturn("/List/EmailPassword","{'listID':'"+t+"'}"),$(".trEmailMsg").show(),!1}function ShowHidelistpasswordFields(n,t){var i,r;n!="P"&&(i=IsPwdNeeded(t),i?(r=CheckListUIDinSession(t),r==!0&&(n="P")):n="P");n=="P"?($(".trListPwdError").hide(),$(".divListPwdError").text(""),$(".trEmailMsg").hide(),$(".tblForPrivateList").hide(),$(".tblEditForm").show()):($(".trListPwdError").show(),$(".divListPwdError").text(""),$(".trEmailMsg").hide())}function CheckListUIDinSession(n){return BowkerAjaxCallReturn("/Search/CheckListUidInSession","{'listUid':'"+n+"'}")}function IsPwdNeeded(n){var t=!0,r=isAdmin(),i;return r?t=!1:(i=CheckListUIDinSession(n),i==!0&&(t=!1)),t}function RedirectToListDetail(){var n=$("[id$=hdnListName]").val(),t=$("[id$=hdnListId]").val();window.location.href="/ListDetails/Index?ListUID="+t+"&list_name="+n}function ResetDropDownCache(){SetSessionItem("RclSubjects","")}function BroadenSearch(){return Search("&bsrch=1&op=6")}function NarrowSearch(){return Search("&nsrch=1&op=7")}function IncludeOtherMarkets(){return Search("&incmkt=1&op=9")}function GetQueryStringFromTargetURL(n,t){for(qsvals=t.split("?")[1],qs=qsvals.split("&"),i=0;i<qs.length;i++)if(val=qs[i].split("="),val[0]==n)return val[1]}var cntrlPrefix="",getSelectedItemsForMyDisc=function(){var n;return getSelectedItems(),n=getValFromSession(),JSON.stringify(n)},AddToListITem;$(document).ready(function(){var n=GetQueryString("op"),t=GetQueryString("f"),i,r,s,f,h,e,a,c,v,y,p,k,l;t?(t.indexOf(" @@  @@ ")!=-1&&(t=t.replace(" @@  @@ "," @@ ")),t.slice(0,4)==" @@ "&&(t=t.slice(4,t.length)),t.slice(-4)==" @@ "&&(t=t.slice(0,t.length-4)),sessionStorage.setItem("BIP_SELECTED_FACETS",t),r=JSON.stringify({facet:t}),BowkerAjaxCall("/Search/SetFacetInSession","{}",r),i=BowkerAjaxCallNoParams("/Search/Retainfacet"),$("#hdnSelectedFacet").val(i)):window.location.href.indexOf("FullRefinement")==-1&&n!=12&&n!=11&&n!=2&&n!=3&&n!=4?window.location.href.indexOf("TitleDetail")!=-1&&sessionStorage.getItem("BIP_SELECTED_FACETS")&&sessionStorage.getItem("BIP_SELECTED_FACETS")!=""?(i=BowkerAjaxCallNoParams("/Search/Retainfacet"),$("#hdnSelectedFacet").val(i)):(sessionStorage.setItem("BIP_SELECTED_FACETS",""),r=JSON.stringify({facet:""}),BowkerAjaxCall("/Search/SetFacetInSession","{}",r)):sessionStorage.getItem("BIP_SELECTED_FACETS")&&sessionStorage.getItem("BIP_SELECTED_FACETS")!=""&&(i=BowkerAjaxCallNoParams("/Search/Retainfacet"),$("#hdnSelectedFacet").val(i));n!=1&&n!=10&&n!=17&&n!=18&&n!=16&&n&&n!="undefined"||window.location.href.indexOf("FullRefinement")==-1&&n!=12&&n!=11&&n!=2&&n!=3&&n!=4&&(window.location.href.indexOf("TitleDetail")!=-1&&sessionStorage.getItem("BIP_SELECTED_FACETS")&&sessionStorage.getItem("BIP_SELECTED_FACETS")!=""?(i=BowkerAjaxCallNoParams("/Search/Retainfacet"),$("#hdnSelectedFacet").val(i)):(sessionStorage.setItem("BIP_SELECTED_FACETS",""),r=JSON.stringify({facet:""}),BowkerAjaxCall("/Search/SetFacetInSession","{}",r)));$("#divShowSelectedInfo").css("display")=="block"&&$(".rssLink").each(function(){$(this).css("display","none")});$("input[id$='hdnSearchTerm']").val()&&(document.getElementById("txtSearch").value=$("input[id$='hdnSearchTerm']").val(),document.getElementById("txtSearchMobile").value=$("input[id$='hdnSearchTerm']").val(),txtSearch=$("input[id$='hdnSearchTerm']").val(),txtSearchMobile=$("input[id$='hdnSearchTerm']").val());$("input[id$='hdnSearchType']").val()&&(s=$("input[id$='hdnSearchType']").val(),f=$("#searchTypeUl li"),f.each(function(n,t){var i=$(t),r=i.attr("data-value");r==s&&($("#selectedVal").text(i.text()),$("#ddlSearchType").val(r))}),f=$("#mobileSearchDropDown li"),f.each(function(n,t){var i=$(t),r=i.attr("data-value");r==s&&($("#mobileSearchTypeText").text(i.text()),$("#ddlSearchType").val(r))}));$("#hdnSelectedFacet").val()!=""&&$("#SelectedFacets").html($("#hdnSelectedFacet").val());try{TrimFormatFieldinSearchResults();$("#facetsSection").css("display")=="none"&&($("#mainContent").removeClass("col-md-9"),$("#mainContent").addClass("col-md-12"));$("input[prop='q']").keypress(Digit_field_onKeyPress);h=sessionStorage.getItem("SearchTypeIndex");h&&$("#jqxWidget").jqxDropDownList("selectIndex",h);e=getValFromSession();e!=null&&(displaySelectedCount(),a=window.location.pathname,a.indexOf("DetailedView")!=-1?(c=$("[id$=hdnRequestIds]").val(),v=$("[id$=hdnMarketCode]").val(),c!=null&&(y=c.split(":"),p=y[1],$.each(e,function(n,t){t.itemUid==p&&t.marketCode==v&&($("[id$=txtQuantity]").val(t.quantity),$("[id$=txtNote]").val(t.note),$(".mlCheckBox").attr("checked",!0))}))):$.each(e,function(n,t){var i;if($("#"+t.id)){$("#"+t.id).attr("checked",!0);i=$("div#mainContent_"+t.id+" div.divQN");$(i).show();i.find("input[prop='q']").val(t.quantity);i.find("input[prop='n']").val(t.note);var u=t.itemUid,f=t.marketCode,r=$("div#hiddenContent_"+u+"_"+f+"  div.divQN");$(r).show();r.find("input[prop='q']").val(t.quantity);r.find("input[prop='n']").val(t.note)}}));var u=$(".mlCheckBox:checked").length,d=$(".mlCheckBox:not(:checked)").length,w=u+d;w!=0&&w==u&&$("#chckHead").attr("checked",!0);$("[id$=SearchCatalogButton],[id$=SearchCatalogButtonSm],[id$=SearchCatalogButtonFooter]").click(function(){var n,t;return u=getTotalCheckedCount(),u>0?(n="",getSelectedItems(),t=getValFromSession(),n=GetSelectedMarketCodeAndItemUids(t),SrchCatalogItem(n)):(ErrorMsg_NoRecSelected(),!1)});GetItemUid=function(n){var t="",r=$("#DetailedAction span[prop='view']").text(),i;if(r=="Detail")document.getElementById(cntrlPrefix+"hdnItemUid")&&document.getElementById(cntrlPrefix+"hdnItemUid").value!=""&&(t=document.getElementById(cntrlPrefix+"hdnItemUid").value);else if(n.length>0)for(i=0;i<n.length;i++)t=t!=""?t+","+n[i].itemUid:n[i].itemUid;else document.getElementById(cntrlPrefix+"hdnItemUid")&&document.getElementById(cntrlPrefix+"hdnItemUid").value!=""&&(t=document.getElementById(cntrlPrefix+"hdnItemUid").value);return t};function b(n,t){o(n,t,!1)}function g(n,t,i,r,u,f){if(t=="true"){var s=n.attr("bip:item-uid"),h=n.attr("bip:market-code"),e="div#mainContent_"+s+h+"  div.divQN",o="div#hiddenContent_"+s+"_"+h+"  div.divQN";$(e).show();$(o).show();r=="checkAllFooterLink"?u==f&&($(e).find("input[prop='q']").focus(),$(o).find("input[prop='q']").focus()):i&&u==1&&($(e).find("input[prop='q']").focus(),$(o).find("input[prop='q']").focus())}}function o(n,t,i){var e=n.attr("bip:item-uid"),o=n.attr("bip:market-code"),r="div#mainContent_"+e+o+"  div.divQN",u="div#hiddenContent_"+e+"_"+o+"  div.divQN";if(t=="true")$(r).show(),$(u).show(),$(r).find("input[prop='q']").focus(),$(u).find("input[prop='q']").focus();else if(t=="false"){$(r).hide();$(u).hide();$(r+' div.divQN  input[prop="q"]').val("");$(r+' div.divQN  input[prop="n"]').val("");$(u+' div.divQN  input[prop="q"]').val("");$(u+' div.divQN  input[prop="q"]').val("");var s=$(n).attr("bip:isbn"),h=$(n).attr("id"),f=getValFromSession();f!=null&&f!=""&&$.each(f,function(n,t){if(t.isbn==s&&t.id==h)return f.splice(n,1),setValInSession(f),!1})}i||displaySelectedCount()}$("#linkTitleMore").click(function(){return document.getElementById("annot")&&(TitleDetail.InternalShowTab("annot"),TitleDetail.ShowDiv(document.getElementById("annot")),document.getElementById("titlesummary").scrollIntoView(),TitleDetail.FocusTab(document.getElementById("annot"))),!1});$("input:checkbox[class='mlCheckBox']").click(function(){this.checked==!0?b($(this),"true"):b($(this),"false")});$(".chckLink").click(function(){var i=$(this).attr("id"),n=1,r=$("#ddlRecsPerPage2").val(),t;$(".mlCheckBox:not(:checked)").attr("checked",!0);$(".mlCheckBox:checked").each(function(){g($(this),"true",!0,i,n,r);n++});$("#divSelectedCount").text("");document.getElementById("divSelectedCountSm")&&(t="<span class='caret'><\/span>",document.getElementById("divSelectedCountSm").innerHTML=""+t);displaySelectedCount()});$(".unchkLink").click(function(){if($(".mlCheckBox:checked").attr("checked",!1),$(".mlCheckBox:not(:checked)").each(function(){o($(this),"false",!0)}),$("#divSelectedCount").text(""),document.getElementById("divSelectedCountSm"))document.getElementById("divSelectedCountSm").innerHTML="<span class='caret'><\/span>";displaySelectedCount()});$("#chckHead").click(function(){if(this.checked==!1){if($(".mlCheckBox:checked").attr("checked",!1),$(".mlCheckBox:not(:checked)").each(function(){o($(this),"false",!0)}),$("#divSelectedCount").text(""),document.getElementById("divSelectedCountSm"))document.getElementById("divSelectedCountSm").innerHTML="<span class='caret'><\/span>"}else $(".mlCheckBox:not(:checked)").attr("checked",!0),$(".mlCheckBox:checked").each(function(){o($(this),"true",!0)});displaySelectedCount()});$("[id$=ClearLinkButton],[id$=ClearLinkButtonSm],[id$=ClearLinkButtonFooter]").click(function(){return u=getTotalCheckedCount(),u==0?ErrorMsg_NoRecSelected():confirm("Are you sure you wish to clear the current selection?")&&(clearSession_SelectedItems(),$("#chckHead").attr("checked",!1),$(".mlCheckBox").attr("checked",!1),clear_Hide_QuantityNoteTextboxes(),displaySelectedCount()),!1});jQuery(".paging").click(function(){getSelectedItems()});k=$(window).width();l=$("input[id$='hdnCdnImagePath']").val();k<=1100&&SetActionBarWidth();typeof sessionStorage!="undefined"&&sessionStorage.setItem("BIP_TagCloud_IsDataBinded",null);DisplayTagCloud();$("#divShowSelectedInfo").css("display")=="block"&&$(".rssLink").each(function(){$(this).css("display","none")});$("#divTagCloudHead").click(function(){$(this).next().slideToggle("normal",function(){var t=nt($(this)),n;return typeof sessionStorage!="undefined"&&sessionStorage.setItem("BIP_TagCloud_Exp_Col_Status",t),t=="Expand"&&(typeof sessionStorage!="undefined"&&(n=sessionStorage.getItem("BIP_TagCloud_IsDataBinded")),n&&n!="Y"&&DisplayTagCloud()),!1})});function nt(n){var t="";return $(n).is(":hidden")?(t="Collpase",$("#imgArrowDown").attr("src",l+"/arrow_down.jpg")):(t="Expand",$("#imgArrowDown").attr("src",l+"/arrow_up.jpg")),t}}catch(tt){alert(tt)}});$(function(){$("#btnCancel").click(function(){return $("#AddToListPopup").modal("hide"),!1});$("input[id$='btnCancelListPwdDialog']").click(function(){return $("#PrivateModalPopup").modal("hide"),!1});$("input[id$='btnSubmitPwdCancelForEdit']").click(function(){return $("#EditModalPopup").modal("hide"),!1})});AddToListITem=function(n,t,i,r){var u,f;if(document.getElementById("addProcessingMessage").style.display="",$(".ListDropDownList").attr("disabled",!0),$(".txtListPwdAddtoList").attr("disabled",!0),$("[id$=btnAddtoList]").attr("disabled","disabled"),$("[id$=btnCancel]").attr("disabled","disabled"),$("[id$=btnAddtoList]").removeClass("add"),$("[id$=btnCancel]").removeClass("cancel"),$("[id$=btnAddtoList]").addClass("addDisable"),$("[id$=btnCancel]").addClass("cancelDisable"),$(".trEmailMsg").hide(),r.search("btnAddtoList")>-1&&(u=BowkerAjaxCallReturn("/Search/GetListTypeCode",JSON.stringify({listUid:n})),u=="PP"&&(f=CheckListPassword(n,u,"AddtoList"),!f)))return!1;$(".trListPwdError").hide();$(".divListPwdError").text("");$(".lnkForgotPwd").hide();var e=$("#count_check:checked").length==1?"true":"false",o=JSON.stringify({listUid:n,marketId:t,selectedItems:i,buttonClicked:r,countCheck:e}),s=window.location.pathname;BowkerAjaxCallList("/Search/AddtoExistingList",o,function(){var n=this;if(document.getElementById("addProcessingMessage").style.display="none",$(".ListDropDownList").attr("disabled",!1),$(".txtListPwdAddtoList").attr("disabled",!1),$("[id$=btnAddtoList]").removeAttr("disabled"),$("[id$=btnCancel]").removeAttr("disabled"),$("[id$=btnAddtoList]").removeClass("addDisable"),$("[id$=btnCancel]").removeClass("cancelDisable"),$("[id$=btnAddtoList]").addClass("add"),$("[id$=btnCancel]").addClass("cancel"),$("[id$=btnYes]").removeClass("addDisable"),$("[id$=btnNo]").removeClass("cancelDisable"),$("[id$=btnYes]").addClass("add"),$("[id$=btnNo]").addClass("cancel"),n=="Dupe")$(".divButton").hide(),$("#divList").hide(),$(".divConfirm").show(),document.getElementById("addDupProcessingMessage").style.display="none",$(".ListDropDownList").attr("disabled",!0),$(".txtListPwdAddtoList").attr("disabled",!0),$(".divConfirmMsg").html('<input name="count_check" id="count_check" type="checkbox" >Item(s) already exists in your list, would you like to increase the quantity? '),$("[id$=btnYes]").val("Add to List"),$("[id$=btnNo]").val("Cancel");else if(n=="1")$(".divButton").hide(),$("#tblExListForm").hide(),$(".divConfirm").hide(),$(".divBacktoResult").show(),$(".divUserMsg").text("List Operation Successful"),$(".ListDropDownList").attr("disabled",!0),$(".txtListPwdAddtoList").attr("disabled",!0),$(".dialog").dialog({position:"center"});else if(n=="2")alert("Item selection cannot exceed maximum limit of 500!");else if(n=="3")alert("List exceeded maximum limit of 500 items. Create a new list to add remaining items."),$(".divConfirm").hide(),$(".ListDropDownList").attr("disabled",!1),$(".divButton").show(),document.getElementById("addProcessingMessage").style.display="none";else{if(n=="4")return $("#AddToListPopup").modal("hide"),$(".divUserMsg").html(""),!1;n=="5"?($(".divButton").hide(),$("#tblExListForm").hide(),$(".divConfirm").hide(),$(".divBacktoResult").show(),$(".divUserMsg").text("No Items Added"),$(".ListDropDownList").attr("disabled",!0),$(".txtListPwdAddtoList").attr("disabled",!0)):alert("Unexpected error occured !")}},"json")};var ClearItemSelection=function(){var t,n;clearSession_SelectedItems();$("#divSelectedCount").text("");document.getElementById("divSelectedCountSm")&&(t="<span class='caret'><\/span>",document.getElementById("divSelectedCountSm").innerHTML=""+t);$("#chckHead").attr("checked",!1);n=$("div.divQN");n.find("input[prop='q']").val("");n.find("input[prop='n']").val("")},BowkerAjaxCallList=function(n,t,i,r){$.ajax({type:"POST",url:n,contentType:"application/json; charset=utf-8",async:!1,dataType:r,data:t,timeout:6e4,error:handleAjaxError,success:function(n){i.call(n)}})},handleAjaxError=function(n){n.status==401&&(window.location.href="/Login/Index")},ShowSelectedItems=function(n){var t=JSON.stringify({selectedItems:n});$("input[id$='hidShowSelected']").val(n)};$(document).ready(function(){try{$("#bodyDivAddtoList").attr("style","visibility:visible");$("input[id$='btnAddtoList'],input[id$='btnYes']").click(function(){var n=$("[id$=ListDropDownList]").val();if(n!=null){$("input[id$='btnYes']").click(function(){document.getElementById("addDupProcessingMessage").style.display="";$("[id$=btnYes]").removeClass("add");$("[id$=btnNo]").removeClass("cancel");$("[id$=btnYes]").addClass("addDisable");$("[id$=btnNo]").addClass("cancelDisable")});var t=getSearchActionItems(),i=this.id;return AddToListITem(n,"",t,i),!1}document.getElementById("addProcessingMessage").innerHTML="No lists exist for account. Please create a list.";document.getElementById("addProcessingMessage").style.display="block"});$("input[id$='btnSuccess'],input[id$='btnCancel']").click(function(){$("#AddToListPopup").modal("hide");$(".divUserMsg").html("")});$("input[id$='btnCancelListDialog']").click(function(){return $("#dialog").dialog("close"),HidePopupCurtain(),!1});$("input[id$='btnNo']").click(function(){var i=$("[id$=ListDropDownList]").val(),n,t;document.getElementById("addDupProcessingMessage").style.display="";$("[id$=btnYes]").removeClass("add");$("[id$=btnNo]").removeClass("cancel");$("[id$=btnYes]").addClass("addDisable");$("[id$=btnNo]").addClass("cancelDisable");n=getSearchActionItems();t=this.id;AddToListITem(i,"",n,t)});$(".Display").click(function(){var n=Markets.missing;ShowSelectedItems(n);ClearItemSelection()});$("[id$=AddtoListLinkButton], [id$=AddtoListLinkButtonSm],[id$=AddtoListLinkButtonFooter],[id$=AddtoListLinkButtonDetail]").click(function(){if($("input:radio[name=AddtoList]")[0].checked=!0,document.getElementById("addProcessingMessage").style.display="none",checkedItemCnt=getTotalCheckedCount(),checkedItemCnt==0)return ErrorMsg_NoRecSelected(),!1;setTimeout(function(){$(".divConfirm").hide();$(".divBacktoResult").hide();$(".divButton").show();$("#divList").show();$(".trEmailMsg").hide();$(".trListPwdError").hide();$(".divListPwdError").text("");OnAddtoExList();$("#divCreateList").hide();$(".ListDropDownList").removeAttr("disabled");$(".txtListPwdAddtoList").removeAttr("disabled");var n="Add "+checkedItemCnt+" item(s) to List";$("#AddToListLabel").text(n)},50)})}catch(n){alert(n)}});$(document).ready(function(){try{$(".bodyDivNewList").attr("style","visibility:visible");$(".divBackToResultCreateList").hide();$(".pwdField").hide();$(".divError").hide();$("input[id$='btnSuccessCreateList'],input[id$='btnCreateCancel']").click(function(){$("#AddToListPopup").modal("hide")});$("#PwdProtectCheckBox").click(function(){this.checked==!0?$(".pwdField").show():$(".pwdField").hide()});$("#ListDropDownList").change(function(){var n=$("option:selected",$(this)).text(),t=$("option:selected",$(this)).val();SaveListLastSelectedValue(n);SaveListLastSelectedID(t)})}catch(n){alert(n)}});$(document).ready(function(){try{$(".bodyDivEmailSelection").attr("style","visibility:visible");$(".emailValiation").attr("style","visibility:hidden");$("[id$=EmailSelectionButton],[id$=EmailSelectionButtonSm],[id$=EmailSelectionButtonFooter]").click(function(){var n;if(checkedItemCnt=getTotalCheckedCount(),checkedItemCnt>0)displayDefaultEmailDialogUI(),n=checkedItemCnt>0?"E-mail "+checkedItemCnt+" item(s)":"E-mail",$("#ModalLabel").text(n),$(".modal-footer").html("<button type='button' id='btnEmailCancel' class='btn btn-secondary' data-dismiss='modal'>Cancel<\/button><input type='button' value='Send' id='btnSendEmail' class='btn btn-default'/>"),$("#user_content").load("/DetailedAction/Email");else return ErrorMsg_NoRecSelected(),!1})}catch(n){alert(n)}});$(document).ready(function(){try{$(".bodyDivRequestTitleSelection").attr("style","visibility:visible");$(".requestTitleValiation").attr("style","visibility:hidden");$("[id$=RequestTitleSelectionButton],[id$=RequestTitleSelectionButtonSm],[id$=RequestTitleSelectionButtonFooter]").click(function(){var n;if(checkedItemCnt=getTotalCheckedCount(),checkedItemCnt>0)displayDefaultRequestTitleDialogUI(),n=checkedItemCnt>0?"Request "+checkedItemCnt+" item(s)":"Request item(s)",$("#ModalLabel").text(n),$("#user_content").load("/DetailedAction/RequestTitle"),$(".modal-footer").html("<button type='button' id='btnRequestTitleCancel' class='btn btn-secondary' data-dismiss='modal'>Cancel<\/button><input type='button' value='Send' id='btnSendRequestTitle' class='btn btn-default'/>");else return ErrorMsg_NoRecSelected(),!1})}catch(n){alert(n)}});$(document).ready(function(){try{$(".bodyDivPrintSelection").attr("style","visibility:visible");$("#printValiation").attr("style","visibility:hidden");$("[id$=PrintSelectionButton],[id$=PrintSelectionButtonSm],[id$=PrintSelectionButtonFooter]").click(function(){var n;if(checkedItemCnt=getTotalCheckedCount(),checkedItemCnt>0)displayDefaultPrintDialogUI(),n=checkedItemCnt>0?"Print "+checkedItemCnt+" item(s)":"Print",$("#ModalLabel").text(n),$("#user_content").load("/DetailedAction/Print"),$(".modal-footer").html("<button type='button' id='btnPrintCancel' class='btn btn-secondary' data-dismiss='modal'>Cancel<\/button><input type='button' value='Print' id='btnSendPrint' class='btn btn-default'/>");else return ErrorMsg_NoRecSelected(),!1})}catch(n){alert(n)}});$(document).ready(function(){try{$("#dvContainer").css("margin-top","0px");$(".bodyDivDownloadSelection").attr("style","visibility:visible");$("#downloadValiation").attr("style","visibility:hidden");$("[id$=DownloadSelectionButton],[id$=DownloadSelectionButtonSm],[id$=DownloadSelectionButtonFooter]").click(function(){var n;if(checkedItemCnt=getTotalCheckedCount(),checkedItemCnt>0)displayDefaultDownloadDialogUI(),n=checkedItemCnt>0?"Download "+checkedItemCnt+" item(s)":"Download",$("#ModalLabel").text(n),$(".modal-footer").html("<button type='button' id='btnDownloadCancel' class='btn btn-secondary' data-dismiss='modal'>Cancel<\/button><input type='button' value='Download' id='btnSendDownload' class='btn btn-default'/>"),$("#user_content").load("/DetailedAction/Download");else return ErrorMsg_NoRecSelected(),!1})}catch(n){alert(n)}});$(document).ready(function(){try{$("[id$='viewSelectedBtn'],[id$='viewSelectedBtnSm'],[id$='viewSelectedBtnFooter']").click(function(){return checkedItemCnt=getTotalCheckedCount(),checkedItemCnt>0?Search("shsel"):(ErrorMsg_NoRecSelected(),!1)})}catch(n){alert(n)}});$(document).ready(function(){try{$("#sortByAlphabet").click(function(){var n=$("#mlfullrefine_column_right");return n.html("&nbsp;"),n.addClass("mlfullrefine_column_loading"),window.location.href="/FullRefinement/Index?fullrefinesorting=alphabet&fct="+$("input[name=hdnActiveFacet]").val(),!1});$("#sortByRelevance").click(function(){var n=$("#mlfullrefine_column_right");return n.html("&nbsp;"),n.addClass("mlfullrefine_column_loading"),window.location.href="/FullRefinement/Index?fullrefinesorting=relevance&fct="+$("input[name=hdnActiveFacet]").val(),!1})}catch(n){alert(n)}})