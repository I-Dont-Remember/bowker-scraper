function ChildSubjectClick(n){$("#selectedValChild").text(trimText(n,14));$("#selectedValChild").attr("value",n);$("#selectedValChildXS").text(trimText(n,7));$("#selectedValChildXS").attr("value",n);$("#RCLChildSubjectsUl").hide();$("#RCLChildSubjectsUlXS").hide()}function Enter_KeyPress(n,t,i){var r=i.keyCode?i.keyCode:i.which?i.which:i.charCode;r==13&&t.toUpperCase().indexOf("ADMIN_DIALOG")!=-1&&btnCheckAdminCredentialsClick()}function btnCheckAdminCredentialsClick(){var n=$.trim($("#adminUID").val()),t=$.trim($("#adminPWD").val()),r=$.trim($("#hdnFromLink").val()),i,u;return n.length==0?(alert("Please enter ID."),$("#adminUID").focus(),!1):t.length==0?(alert("Please enter Password."),$("#adminPWD").focus(),!1):(i=sessionStorage.getItem("ADMINData").split("<SPLIT>"),i[0]==n&&i[1]==t?($("#AdminCheckModal").modal("hide"),r=="AdminLink"?(document.location.href="/MyAccount/Index?Url=0",sessionStorage.setItem("AdvSearchConfigGranted",!0)):r=="ListUnlockLink"&&alert("All the private lists has been unlocked!"),u=n+"<SPLIT>"+t+"<SPLIT>GrantedForAdminPage",sessionStorage.setItem("ADMINData",u),$("#hdnFromLink").val(""),!0):(alert("ID or Password not matched."),$("#adminUID").focus(),!1))}function SetSessionItem(n,t){if(typeof sessionStorage!="undefined")try{sessionStorage.setItem(n,JSON.stringify(t))}catch(i){}else return SetServerSessionVal(n,JSON.stringify(t)),!1}function GetSessionItem(n,t){if(typeof sessionStorage!="undefined")try{return callbackdata=sessionStorage.getItem(n)?$.parseJSON(sessionStorage.getItem(n)):undefined,sessionStorage.getItem(n)?$.parseJSON(sessionStorage.getItem(n)):undefined}catch(i){}else{var t=GetServerSessionVal(n);return t?$.parseJSON(t):undefined}}function replaceAll(n,t,i){return i.replace(new RegExp(n,"g"),t)}function After_GetChildSubjects(n){$("#RCLChildSubjectsUl").html(n);$("#RCLChildSubjects").show();$("#RCLChildSubjectsUlXS").html(n);$("#RCLChildSubjectsXS").show()}function SetFocusToSrchBoxOnSkipClick(){$("#txtSearch").val("");$("#txtSearch").focus();$("#txtSearchMobile").val("");$("#txtSearchMobile").focus();$("#txtcompany").val("");$("#txtcompany").focus()}function validate(){var n=document.getElementById("txtSearch");if((n.value==" Enter your query here... "||n.value=="")&&(n=document.getElementById("txtSearchMobile")),n.value=="Enter your query here..."||n.value=="")return alert("Enter Keyword to Search"),!1;try{getSelectedItems()}catch(t){}return!0}function CheckAdminCredentials(n){var t=sessionStorage.getItem("ADMINData");if(t)return t=t.split("<SPLIT>"),t[2]=="Granted"||t[2]=="GrantedForAdminPage"?(n=="AdminLink"?document.location.href="/MyAccount/Index?Url=0":n=="ListUnlockLink"&&alert("All the private lists are already unlocked!"),!0):($("#AdminCheckModal").modal("show"),$(".modal-footer").html('<input type="button" id="btnCancelAdminCredentials" class="btn btn-secondary" value="Cancel" data-dismiss="modal" tabindex="1004" aria-label="Close" /><input type="button" id="btnCheckAdminCredentials" class="btn btn-default" onclick="btnCheckAdminCredentialsClick()" value="OK"tabindex="1003" /><input id="hdnFromLink" type="hidden" value="" />'),$("#adminUID").val(""),$("#adminPWD").val(""),$("#hdnFromLink").val(n),!1);BowkerAjaxCall("/MyAccount/GetAdminData","After_GetAdminData")}function FormatHeaderLinks(){var n=window.location.href;n.toUpperCase().indexOf("MYACCOUNT")!=-1?$(".myAccountLink").addClass("active"):n.toUpperCase().indexOf("LIST")!=-1?$(".listLink").addClass("active"):n.toUpperCase().indexOf("LISTDETAILS")!=-1?$(".listLink").addClass("active"):n.toUpperCase().indexOf("PUBLISHER")!=-1?$("#publisherLink").addClass("active"):n.toUpperCase().indexOf("BROWSE")!=-1?$(".browseLink").addClass("active"):n.toUpperCase().indexOf("STATSREPORT")!=-1?$("#statsReportLink").addClass("active"):$(".homeLink").addClass("active")}function SetSessionItem(n,t){if(typeof sessionStorage!="undefined")try{sessionStorage.setItem(n,JSON.stringify(t))}catch(i){}else return SetServerSessionVal(n,JSON.stringify(t)),!1}function CheckAdminCredentialsForURL(){var n=sessionStorage.getItem("ADMINData"),i,t;if(document.referrer&&(i=document.referrer.split("?"),t=i[0],t.indexOf("MyAccount")>-1||t.indexOf("UsageStats")>-1||t.indexOf("barcode")>-1||t.indexOf("Z3950_Profile")>-1))return!0;if(n)return n=n.split("<SPLIT>"),n[2]=="Granted"||n[2]=="GrantedForAdminPage"?!0:(document.location.href="/Home/Index?fa=1",!1);document.location.href="/Home/Index?fa=1"}function CheckAdminCredentialsForDirectURL(){var n=sessionStorage.getItem("ADMINData");if(n){if(n=n.split("<SPLIT>"),n[2]=="Granted")return document.location.href="/MyAccount/Index",!0;BowkerAjaxCall("/MyAccount/GetAdminData","After_GetAdminData")}else BowkerAjaxCall("/MyAccount/GetAdminData","After_GetAdminData")}function watermark(n,t){var i=document.getElementById(n);i.value.length>0?i.value==t&&(i.value=""):i.value=t}function clearSessionStorage(){typeof sessionStorage!="undefined"&&sessionStorage.clear()}function GetAppType(){return BowkerAjaxCallNoParams("/Home/GetAppType")}function MaxDownloadableItemsAlert(n){if(n!=null&&n!=""){var t=JSON.parse(n).length;if(t>500)return alert("Maximum of 500 items is allowed for Print/Email/Download"),!1}return!0}function ExpandSearchType(){$("#searchdropdown").addClass("dropdown open")}var titleTypeaHeadEngine=new Bloodhound({name:"Titles",remote:{url:"/Typeahead/Result",filter:function(data){return eval(data)},replace:function(n,t){return typeheadQuery=t,n+"?query="+t+"&type="+$("#ddlSearchType").val()}},datumTokenizer:function(n){return Bloodhound.tokenizers.whitespace(n.val)},queryTokenizer:Bloodhound.tokenizers.whitespace}),currentUrl,SetServerSessionVal,After_GetAdminData,trimText,webpropertyID,_gaq;application={};currentUrl=window.location.href;application.appName=currentUrl.toUpperCase().indexOf("RCL")!=-1?"RCL":"BIP";$(document).ready(function(){var n,t,f,i,r,u;if($("#selectedValChild, #selectedValChildCaret").click(function(){$("#RCLChildSubjectsUl").toggle()}),$("#selectedValChildXS").click(function(){$("#RCLChildSubjectsUlXS").toggle()}),subjects=GetqueryParam("sub"),subjects&&subjects!=""?(RclSessionSub=subjects,SetSessionItem("RclSubjects",subjects)):RclSessionSub=GetSessionItem("RclSubjects"),RclSessionSub&&RclSessionSub!=""?RclSessionSub.split("|")[1]||($("#RCLChildSubjects").hide(),$("#RCLChildSubjectsXS").hide(),$("#RCLChildSubjectsUlXS").hide()):($("#RCLChildSubjects").hide(),$("#RCLChildSubjectsXS").hide(),$("#RCLChildSubjectsUlXS").hide()),currentUrl.indexOf("Search/Results")==-1&&($("#RCLChildSubjects").hide(),$("#RCLChildSubjectsXS").hide(),$("#RCLChildSubjectsUlXS").hide()),(currentUrl.indexOf("Search/Results")!=-1||currentUrl.indexOf("FullRefinement")!=-1)&&RclSessionSub&&RclSessionSub!=""&&($("#RCLMainSubjectsUl li").each(function(){if(RclSessionSub.split("|")[0]&&$(this).text()==replaceAll("%20"," ",RclSessionSub.split("|")[0]))return $(this).addClass("selected"),$("#selectedValMain").text(trimText($(this).text(),14)),$("#selectedValMain").attr("value",$(this).text()),!1}),$("#RCLMainSubjectsUlXS li").each(function(){if(RclSessionSub.split("|")[0]&&$(this).text()==replaceAll("%20"," ",RclSessionSub.split("|")[0]))return $(this).addClass("selected"),$("#selectedValMainXS").text(trimText($(this).text(),7)),$("#selectedValMainXS").attr("value",$(this).text()),!1}),$("#RCLMainSubjectsUl li.selected").attr("data-value")!=""&&(n=JSON.stringify({parentSubId:$("#RCLMainSubjectsUl li.selected").attr("data-value")}),t=BowkerAjaxCall("/Home/GetRCLSubjects","After_GetChildSubjects",n),$("#RCLChildSubjectsUl li").each(function(){if(RclSessionSub.split("|")[1]&&$(this).text()==replaceAll("%20"," ",RclSessionSub.split("|")[1]))return $(this).addClass("selected"),$("#selectedValChild").text(trimText($(this).text(),14)),$("#selectedValChild").attr("value",$(this).text()),!1})),$("#RCLMainSubjectsUlXS li.selected").attr("data-value")!=""&&(n=JSON.stringify({parentSubId:$("#RCLMainSubjectsUlXS li.selected").attr("data-value")}),t=BowkerAjaxCall("/Home/GetRCLSubjects","After_GetChildSubjects",n),$("#RCLChildSubjectsUlXS li").each(function(){if(RclSessionSub.split("|")[1]&&$(this).text()==replaceAll("%20"," ",RclSessionSub.split("|")[1]))return $(this).addClass("selected"),$("#selectedValChildXS").text(trimText($(this).text(),7)),$("#selectedValChildXS").attr("value",$(this).text()),!1}))),$("body").click(function(n){$(n.target).is("#RCLSubjectsDropDown *, #RCLSubjectsDropDown, #RCLSubjectsDropDownXS, #RCLSubjectsDropDownXS *")||($("#RCLChildSubjectsUl").attr("style")&&$("#RCLChildSubjectsUl").attr("style").indexOf("block")!=-1&&$("#RCLChildSubjectsUl").hide(),$("#RCLChildSubjectsUlXS").attr("style")&&$("#RCLChildSubjectsUlXS").attr("style").indexOf("block")!=-1&&$("#RCLChildSubjectsUlXS").hide())}),f=window.location.hostname,application.appName=="BIP"&&(titleTypeaHeadEngine.initialize(),$(".typeahead").typeahead({hint:!0,highlight:!0,minLength:3},{name:"Titls",displayKey:"Value",source:titleTypeaHeadEngine.ttAdapter()})),$("#backToTop").hide(),$(function(){$(window).scroll(function(){$(this).scrollTop()>100?$("#backToTop").fadeIn():$("#backToTop").fadeOut()});$("#backToTop a").click(function(){return $("body,html").animate({scrollTop:0},800),!1})}),$("#searchTypeUl li").click(function(){$("#selectedVal").text($(this).text());$("#ddlSearchType").val($(this).attr("data-value"))}),$("#mobileSearchDropDown li").click(function(){$("#mobileSearchTypeText").text($(this).text());$("#ddlSearchType").val($(this).attr("data-value"))}),$("#RCLMainSubjectsUl li").click(function(){$("#selectedValMain").text(trimText($(this).text(),14));$("#selectedValMain").attr("value",$(this).text())}),$("#RCLMainSubjectsUlXS li").click(function(){$("#selectedValMainXS").text(trimText($(this).text(),7));$("#selectedValMainXS").attr("value",$(this).text())}),$("#mobileSearchDropDown li").click(function(n){n.preventDefault();$("#mobileSearchTypeText").text($(this).text())}),sessionStorage.getItem("ADMINData")||CheckAdminCredentialsForDirectURL(),i=GetqueryParam("fa"),i=="1"){if(r=sessionStorage.getItem("ADMINData"),u=r.split("<SPLIT>"),u[2]=="Granted")return sessionStorage.setItem("AdvSearchConfigGranted",!0),document.location.href="/MyAccount/Index?Url=0",!0;$("#AdminCheckModal").modal("show");$("#adminUID").val("");$("#adminPWD").val("")}$(".myAccountLink").click(function(){var n=window.location.href;n.toUpperCase().indexOf("MYACCOUNT")==-1&&CheckAdminCredentials("AdminLink")});FormatHeaderLinks();$(".mainSubject").click(function(){$("#selectedValChild").text("All Subjects");$("#selectedValChildXS").text("All Subjects");var n=JSON.stringify({parentSubId:$(this).attr("data-value")}),t=BowkerAjaxCall("/Home/GetRCLSubjects","After_GetChildSubjects",n);$("#RCLChildSubjectsUl").show();$("#RCLChildSubjectsUlXS").show()})});var SetServerSessionVal=function(n,t){var i=JSON.stringify({key:n,value:t}),r=BowkerAjaxCall("/Home/SetServerSessionVal","{}",i)},GetServerSessionVal=function(n){var i=JSON.stringify({key:n}),t=BowkerAjaxCall("/Home/GetServerSessionVal","GetSetvValCallBack",i,null,!1);if(t)return t.d},GetSetvValCallBack=function(n){callbackdata=$.parseJSON(n.d)};SetServerSessionVal=function(n,t){var i=JSON.stringify({key:n,value:t}),r=BowkerAjaxCall("/Home/SetServerSessionVal","{}",i)};After_GetAdminData=function(n){if(n!=""){var t=n;sessionStorage.setItem("ADMINData",t);sessionStorage.setItem("AdvSearchConfigGranted",!0)}};trimText=function(n,t){return n&&n.length>t&&(n=n.substring(0,t)+".."),n};webpropertyID="UA-25021442-1";application.appName=="RCL"&&(webpropertyID="UA-30893084-1");_gaq=_gaq||[];_gaq.push(["_setAccount",webpropertyID]);_gaq.push(["_trackPageview"]),function(){var n=document.createElement("script"),t;n.type="text/javascript";n.async=!0;n.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(n,t)}()